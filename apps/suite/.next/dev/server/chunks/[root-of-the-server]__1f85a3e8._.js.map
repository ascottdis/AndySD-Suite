{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Andy/andysd-suite/apps/suite/proxy.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\n\nfunction unauthorized() {\n  return new NextResponse(\"Authentication required.\", {\n    status: 401,\n    headers: { \"WWW-Authenticate\": 'Basic realm=\"AndySD Studio Portal\"' },\n  });\n}\n\nexport function proxy(request: NextRequest) {\n  const user = process.env.PORTAL_USER || \"\";\n  const pass = process.env.PORTAL_PASS || \"\";\n  if (!user || !pass) return unauthorized();\n\n  const authHeader = request.headers.get(\"authorization\");\n  if (!authHeader?.startsWith(\"Basic \")) return unauthorized();\n\n  const base64Credentials = authHeader.split(\" \")[1] ?? \"\";\n  const credentials = Buffer.from(base64Credentials, \"base64\").toString();\n  const [u, p] = credentials.split(\":\");\n\n  if (u === user && p === pass) return NextResponse.next();\n  return unauthorized();\n}\n\nexport const config = {\n  matcher: [\"/portal/:path*\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA;;AAGA,SAAS;IACP,OAAO,IAAI,6QAAY,CAAC,4BAA4B;QAClD,QAAQ;QACR,SAAS;YAAE,oBAAoB;QAAqC;IACtE;AACF;AAEO,SAAS,MAAM,OAAoB;IACxC,MAAM,OAAO,QAAQ,GAAG,CAAC,WAAW,IAAI;IACxC,MAAM,OAAO,QAAQ,GAAG,CAAC,WAAW,IAAI;IACxC,IAAI,CAAC,QAAQ,CAAC,MAAM,OAAO;IAE3B,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;IACvC,IAAI,CAAC,YAAY,WAAW,WAAW,OAAO;IAE9C,MAAM,oBAAoB,WAAW,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;IACtD,MAAM,cAAc,OAAO,IAAI,CAAC,mBAAmB,UAAU,QAAQ;IACrE,MAAM,CAAC,GAAG,EAAE,GAAG,YAAY,KAAK,CAAC;IAEjC,IAAI,MAAM,QAAQ,MAAM,MAAM,OAAO,6QAAY,CAAC,IAAI;IACtD,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAiB;AAC7B"}}]
}